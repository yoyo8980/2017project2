<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>온라인상담</title>
<style type="text/css">
	#em > table{
		margin-left: 500px ;
	}
	table.type08 {
    border-collapse: collapse;
    text-align: left;
    line-height: 1.5;
    border-left: 1px solid #ccc;
    margin: 20px 10px;
}

 table.type08 thead th {
    padding: 10px;
    font-weight: bold;
    border-top: 1px solid #ccc;
    border-right: 1px solid #ccc;
    border-bottom: 2px solid #c00;
    background: #dcdcd1;
}
table.type08 tbody th {
    width: 150px;
    padding: 10px;
    font-weight: bold;
    vertical-align: top;
    border-right: 1px solid #ccc;
    border-bottom: 1px solid #ccc;
    background: #ececec;
}
table.type08 td {
    width: 350px;
    padding: 10px;
    vertical-align: top;
    border-right: 1px solid #ccc;
    border-bottom: 1px solid #ccc;
}
</style>
<script type="text/javascript" src="js/jquery-1.12.4.js"></script>
<script type="text/javascript">
	$(function() {
		$("#emailform").submit(function(e) {
			e.preventDefault();
			console.log("ajax 실행")
			var url="insertemail.do";
			var method="post";
			var param=$(this).serialize();
			
			$.ajax({
				'url':url
				,'type':method
				,'data':param
				,'error':function(a,b,c){
					alert(b+'['+a.status+']:'+c);
				}
				,'success':function(){
					$('#successMsg').html("<h1>상담 이메일 전송이 완료되었습니다. 비트캠프 담당자 확인 후 연락드리겠습니다.</h1>");
					//ajax 성공후 메뉴바가 안보인다. 아마 화면이 복잡해서 그런듯한데
					//일단 이렇게 돌려놓는다. 하지만 이런식이라면 비동기의 의미가 줄어드는 느낌.
					setTimeout(function(){ 
						window.location.replace('startweb.do'); 
					}, 2000); 
				}
			});
		});
	});
</script>
</head>
<body>
<div style="opacity: 0.7">
<img alt="email" src="upload/Email/online.jpg">
<div id="successMsg"></div>
	<form id="emailform">
	<table class="type08">
	<thead>
	<tr>
		<th scope="col">제목</th>
		<th scope="col"><input type="text" name="title" required/></th>
	</tr>
</thead>

	 <tr>
        <th scope="row">작성자</th>
        <td><input type="text" name="author" required/></td>
    </tr>
	
<tr>
        <th scope="row">Email</th>
        <td><input type="text" name="email" required/></td>
    </tr>
    <tr>
        <th scope="row">전화번호</th>
        <td><input type="text" name="phone" required/></td>
    </tr>
<tr>
        <th scope="row">내용</th>
        <td><textarea name="content" id="content" rows=5 cols=30></textarea></td>
    </tr>

</table>
<div id="button">
<button type="submit">보내기</button>
<button type="reset">초기화</button>
</div>
</form>
</div>
</body>
</html>